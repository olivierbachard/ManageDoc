if(void 0===sasDirectives)var sasDirectives=angular.module("sasDirectives",[]);
sasDirectives.directive("sasMultipleSelect",["$rootScope","$filter","$timeout",function(g,l,k){return{restrict:"E",replace:!0,templateUrl:"/Admin/libjs/angularjs/directives/MultipleSelect/sas-multiple-select.html",scope:{options:"=",onAddItem:"&",onRemoveItem:"&"},controller:["$scope",function(a){function f(a,c){for(var d=0;d<c.length;d++)if(c[d].Id==a)return d;return-1}a.$watch("options.sourceItems",function(b,c){if(void 0!=b&&0<b.length&&b.length>c.length&&!0==a.options.groupByParent&&void 0!=b[0].parentName){for(var d=
angular.copy(a.parentList),e=0;e<b.length;e++){for(var f=!1,h=0;h<d.length;h++)if(b[e].parentName==d[h].Name){f=!0;break}f||d.push({Name:b[e].parentName,expanded:!0})}a.parentList=d.sort();a.selectedParentList=angular.copy(a.parentList)}k(function(){g.$broadcast("nicescrollResizeEvent")})},!0);a.$watch("options.selectedItems",function(b){for(var c=0;c<b.length;c++){for(var d=!1,e=0;e<a.parentList.length;e++)if(b[c].parentName==a.parentList[e].Name){d=!0;break}d||a.parentList.push({Name:b[c].parentName,
expanded:!0})}a.selectedParentList=angular.copy(a.parentList)},!0);a.addItem=function(b){var c=f(b.Id,a.options.sourceItems);if(!(0>c)&&(a.options.selectedItems.push(b),a.options.sourceItems.splice(c,1),g.$broadcast("nicescrollResizeEvent"),void 0!=a.onAddItem))a.onAddItem({item:b})};a.removeItem=function(b){var c=f(b.Id,a.options.selectedItems);if(0<=c&&(a.options.selectedItems.splice(c,1),a.options.sourceItems.push(b),g.$broadcast("nicescrollResizeEvent"),void 0!=a.onRemoveItem))a.onRemoveItem({item:b})};
a.searchValueChange=function(){0>=a.searchValue.length&&g.$broadcast("nicescrollResizeEvent")};a.toggleExpand=function(a){a.expanded=!a.expanded;g.$broadcast("nicescrollResizeEvent")}}],link:function(a,f,b){a.parentList=[];a.selectedParentList=[];a.showItemsList=!0;if(void 0==a.options.placeholderText||0>=a.options.placeholderText.length)a.options.placeholderText="Search...";void 0==a.options.groupByParent&&(a.options.groupByParent=!1);a.$on("$destroy",function(){f.find(".nicescroll").each(function(){void 0!=
$(this).data("__nicescroll")&&void 0!=$(this).data("__nicescroll").rail&&$(this).data("__nicescroll").rail.remove()})})}}}]);