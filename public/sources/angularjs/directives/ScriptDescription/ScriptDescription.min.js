var scriptDescription=angular.module("scriptDescription",[]),descDirective=function(h,j){function f(b,d){b.GetScriptType=function(a){switch(a){case 1:return"XML";case 2:return"Javascript";case 3:return"HTML"}};b.GetStarColor=function(a){return a?"Jaune":""};b.DisplaySDKVersion=function(a){a=a.toString();4<=a.length&&(a=a.substr(1));if("999"==a)return void 0!=b.trads?b.trads.Next:"Next";var e=parseInt(a.substr(0,2));a=parseInt(a.substr(2));return"SDK"+e.toString()+"."+a.toString()};b.$watch("script",
function(a){!1==$.isEmptyObject(a)&&(b.currentScript=a,j(function(){var a=$("#templateDescWrapper").width(),b=$("#propertiesContainer").width()+$(".thumbnailContainer").width();"none"!=$("#sdkVersionsContainer").css("display")&&(b+=$("#sdkVersionsContainer").width());$("#templateDescContainer").css("maxWidth",a-b-150+"px");if(void 0===g)var g=d.find(".descriptionDiv").niceScroll({cursorcolor:"#616161",railalign:"left"});g.resize()},800),b.hlTechSpec="http://help.smartadserver.com/specifications/#WebSpecifications.htm",
b.isMobile()&&(b.hlTechSpec="http://manage.smartadserver.com/admin/help/EN/Publisher/Content/Specifications/MobileSpecifications/MobileAppSpecs.aspx"),void 0!==b.trads&&(b.currentScript.IsDraft?b.currentScript.Status=b.trads.Draft:b.currentScript.Deprecated&&(b.currentScript.Status=b.trads.Deprecated)))},!0);b.thumbImageClick=function(){b.imgClick()}}f.$inject=["$scope","$element","$attrs"];return{restrict:"E",replace:!0,templateUrl:"/Admin/libjs/angularjs/directives/ScriptDescription/ScriptDescription.html",
scope:{currentPage:"@",script:"=",isMobile:"&",imgClick:"&",usePublishedClick:"&",useDraftClick:"&"},controller:f,link:function(b){for(var d=$(".lineSeparator"),a,e=0;e<d.length;e++)if(Modernizr.canvas){a=d[e].getContext("2d");var c=a.createLinearGradient(0,0,0,60);c.addColorStop(0,"rgba(0, 0, 0, 0)");c.addColorStop("0.5","rgba(142, 172, 192, 0.5)");c.addColorStop(1,"rgba(0, 0, 0, 0)");a.fillStyle=c;a.fillRect(0,0,1,60)}Modernizr.canvas||($("#propertiesContainer").css("borderLeft","1px solid #bbb"),
$("#sdkVersionsContainer").css({borderLeft:"1px solid #bbb",paddingLeft:"20px"}));d=document.getElementById("thumbImageCanvas");Modernizr.canvas?(a=d.getContext("2d"),a.beginPath(),a.moveTo(50,0),a.lineTo(106,85),a.lineTo(106,3),a.lineTo(103,0),c=a.createLinearGradient(106,0,106,85),c.addColorStop(0,"rgba(255, 255, 255, 0.5)"),c.addColorStop("0.85","rgba(255, 255, 255, 0)"),a.fillStyle=c,a.fill()):$(".thumbnail").css({border:"none"});h.post("/Admin/libjs/Translations/ResxToJS.asmx/GetTrads_ScriptDescription",
{}).success(function(a){b.trads=$.parseJSON(a.d)});b.$watch("trads",function(){void 0!==b.currentScript&&void 0!==b.trads&&(b.currentScript.IsDraft?b.currentScript.Status=b.trads.Draft:b.currentScript.Deprecated&&(b.currentScript.Status=b.trads.Deprecated))})}}};descDirective.$inject=["$http","$timeout"];scriptDescription.directive("sasScriptDescription",descDirective);